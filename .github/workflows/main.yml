name: CI/CD Workflow

on:
  push:
    branches:
      - main
      - release/*
  workflow_dispatch:
jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout
        uses: actions/checkout@v4.0.0
        with:
          # Repository name with owner. For example, actions/checkout
          repository: ${{ github.repository }}
          token: ${{ github.token }}
          ssh-strict: true
          persist-credentials: true
          clean: true
          sparse-checkout-cone-mode: true
          fetch-depth: 1
          show-progress: true
          set-safe-directory: true

      - name: Setup Python
        uses: actions/setup-python@v4.7.0
        with:
          # Version range or exact version of Python or PyPy to use, using SemVer's version range syntax. Reads from .python-version if unset.
          python-version: 3.x
          check-latest: true

      - name: Install Dependencies
        run: pip install -r requirements.txt

      - name: Run PyTest
        uses: paolorechia/fast-pytest-github-action@v1.0
        with:
          pytest_args: ""
          requirements_file: testrequirements.txt

